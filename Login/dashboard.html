<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Classroom Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sidebar {
            transition: width 0.3s ease;
            z-index: 1000;
        }

        .menu-item span {
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .sidebar:hover .menu-item span,
        .sidebar:hover .brand-text {
            opacity: 1;
        }

        .brand-text {
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .erp-content {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .camera-container {
            background: rgba(0, 0, 0, 0.8);
            transition: all 0.3s ease;
        }

        .menu-active {
            display: block !important;
        }

        .icon-container {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-content {
            z-index: 1;
            transition: margin-left 0.3s ease;
        }

        @media (min-width: 768px) {
            .sidebar:hover+.main-content {
                margin-left: 16rem;
            }
        }
    </style>
</head>

<body class="bg-gray-100">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar bg-indigo-800 text-white w-16 hover:w-64 h-screen fixed left-0 top-0">
            <div class="p-4">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-graduation-cap text-2xl"></i>
                    <span class="font-bold text-xl brand-text">SmartClass</span>
                </div>
            </div>


            <!-- Student Menu -->
            <div id="studentMenu" class="menu-active">
                <nav class="mt-8">
                    <ul class="space-y-2">
                        <li class="menu-item">
                            <a href="#dashboard"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <span class="ml-4">Dashboard</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#profile"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <span class="ml-4">Student Profile</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#student-list"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-users"></i>
                                </div>
                                <span class="ml-4">Student List</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#erp" class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-database"></i>
                                </div>
                                <span class="ml-4">ERP</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#study-bot"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <span class="ml-4">Study Bot</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#resources"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-book-open"></i>
                                </div>
                                <span class="ml-4">Resources</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Teacher Menu -->
            <div id="teacherMenu" class="hidden">
                <nav class="mt-8">
                    <ul class="space-y-2">
                        <li class="menu-item">
                            <a href="#dashboard"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <span class="ml-4">Dashboard</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#profile"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <span class="ml-4">Profile</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#faculty-list"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-chalkboard-teacher"></i>
                                </div>
                                <span class="ml-4">Faculty List</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#student-list"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <span class="ml-4">Students List</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#erp" class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-database"></i>
                                </div>
                                <span class="ml-4">ERP</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#resources"
                                class="flex items-center px-4 py-3 hover:bg-indigo-700 transition-colors">
                                <div class="icon-container">
                                    <i class="fas fa-book-open"></i>
                                </div>
                                <span class="ml-4">Resources</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content flex-1 ml-16 p-8">
            <!-- Header -->
            <header class="bg-white shadow-sm rounded-lg p-4 mb-8">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 id="welcomeMessage" class="text-2xl font-bold text-gray-800">Welcome</h1>
                        <p id="userRole" class="text-gray-600"></p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="text-gray-600 hover:text-gray-800">
                            <i class="fas fa-bell text-xl"></i>
                        </button>
                        <button id="userToggle" class="text-gray-600 hover:text-gray-800">
                            <i class="fas fa-user-circle text-xl"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div id="dashboardContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Stats Cards -->
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Assignments</h3>
                        <i class="fas fa-file-alt text-xl text-indigo-600"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-900">12</p>
                    <p class="text-sm text-gray-600">Active assignments</p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Attendance</h3>
                        <i class="fas fa-check-circle text-xl text-green-600"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-900">92%</p>
                    <p class="text-sm text-gray-600">This semester</p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Resources</h3>
                        <i class="fas fa-book-open text-xl text-blue-600"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-900">45</p>
                    <p class="text-sm text-gray-600">Available materials</p>
                </div>
            </div>
        </main>
    </div>
    <script type="text/babel">
        const ERPDashboard = () => {
            const [view, setView] = React.useState('main');
            const [showCamera, setShowCamera] = React.useState(false);
            const [capturedImage, setCapturedImage] = React.useState(null);
            const videoRef = React.useRef(null);

            const startCamera = async () => {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                    videoRef.current.srcObject = stream;
                    setShowCamera(true);
                } catch (err) {
                    console.error("Error:", err);
                    alert("Unable to access camera. Please check permissions.");
                }
            };

            const stopCamera = () => {
                if (videoRef.current && videoRef.current.srcObject) {
                    videoRef.current.srcObject.getTracks().forEach(track => track.stop());
                }
                setShowCamera(false);
                setCapturedImage(null);
            };

            const capturePhoto = () => {
                const canvas = document.createElement('canvas');
                canvas.width = videoRef.current.videoWidth;
                canvas.height = videoRef.current.videoHeight;
                canvas.getContext('2d').drawImage(videoRef.current, 0, 0);
                setCapturedImage(canvas.toDataURL('image/jpeg'));
                stopCamera();
            };

            const renderMainMenu = () => (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 erp-content">
                    <div onClick={() => setView('attendance')}
                        className="bg-white p-6 rounded-lg shadow-sm hover:shadow-md cursor-pointer transition-all">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-lg font-semibold text-gray-800">Attendance Management</h3>
                            <i className="fas fa-users text-xl text-indigo-600"></i>
                        </div>
                        <p className="text-sm text-gray-600">Manage attendance records and reports</p>
                    </div>

                    <div className="bg-white p-6 rounded-lg shadow-sm hover:shadow-md cursor-pointer transition-all">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-lg font-semibold text-gray-800">Course Management</h3>
                            <i className="fas fa-book text-xl text-blue-600"></i>
                        </div>
                        <p className="text-sm text-gray-600">Manage courses and materials</p>
                    </div>

                    <div className="bg-white p-6 rounded-lg shadow-sm hover:shadow-md cursor-pointer transition-all">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-lg font-semibold text-gray-800">Grade Management</h3>
                            <i className="fas fa-chart-line text-xl text-green-600"></i>
                        </div>
                        <p className="text-sm text-gray-600">View and manage grades</p>
                    </div>
                </div>
            );

            const renderAttendanceMenu = () => (
                <div className="erp-content">
                    <div className="mb-6 flex items-center">
                        <button onClick={() => setView('main')}
                            className="text-indigo-600 hover:text-indigo-800 mr-4">
                            <i className="fas fa-arrow-left mr-2"></i>Back
                        </button>
                        <h2 className="text-2xl font-bold text-gray-800">Attendance Management</h2>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div onClick={startCamera}
                            className="bg-white p-6 rounded-lg shadow-sm hover:shadow-md cursor-pointer transition-all">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-gray-800">Take Attendance</h3>
                                <i className="fas fa-camera text-xl text-indigo-600"></i>
                            </div>
                            <p className="text-sm text-gray-600">Use camera to mark attendance</p>
                        </div>

                        <div className="bg-white p-6 rounded-lg shadow-sm hover:shadow-md cursor-pointer transition-all">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-gray-800">View Attendance</h3>
                                <i className="fas fa-list text-xl text-green-600"></i>
                            </div>
                            <p className="text-sm text-gray-600">Check attendance records</p>
                        </div>
                    </div>
                </div>
            );

            const renderCamera = () => (
                <div className="fixed inset-0 camera-container flex items-center justify-center z-50">
                    <div className="bg-white p-6 rounded-lg max-w-2xl w-full mx-4">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800">Take Attendance</h3>
                            <button onClick={stopCamera} className="text-gray-500 hover:text-gray-700">
                                <i className="fas fa-times"></i>
                            </button>
                        </div>

                        <div className="relative rounded-lg overflow-hidden">
                            {!capturedImage ? (
                                <video
                                    ref={videoRef}
                                    autoPlay
                                    playsInline
                                    className="w-full rounded-lg"
                                />
                            ) : (
                                <img src={capturedImage} alt="Captured" className="w-full rounded-lg" />
                            )}
                        </div>

                        <div className="flex justify-center mt-4 space-x-4">
                            {!capturedImage ? (
                                <button
                                    onClick={capturePhoto}
                                    className="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700"
                                >
                                    <i className="fas fa-camera mr-2"></i>
                                    Capture
                                </button>
                            ) : (
                                <>
                                    <button
                                        onClick={() => {
                                            setCapturedImage(null);
                                            startCamera();
                                        }}
                                        className="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600"
                                    >
                                        <i className="fas fa-redo mr-2"></i>
                                        Retake
                                    </button>
                                    <button
                                        onClick={() => {
                                            alert('Attendance marked successfully!');
                                            stopCamera();
                                            setView('attendance');
                                        }}
                                        className="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600"
                                    >
                                        <i className="fas fa-check mr-2"></i>
                                        Mark Attendance
                                    </button>
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-100">
                    {view === 'main' && renderMainMenu()}
                    {view === 'attendance' && renderAttendanceMenu()}
                    {showCamera && renderCamera()}
                </div>
            );
        };

        // Export for use in main script
        window.ERPDashboard = ERPDashboard;
    </script>

    <!-- Modify the existing script -->
    <script>
        // Previous script content remains unchanged until menu item clicks handler

        // Modify the menu item clicks handler
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                // Add click animation
                gsap.to(this, {
                    duration: 0.2,
                    scale: 0.95,
                    yoyo: true,
                    repeat: 1
                });

                // Handle ERP navigation
                if (this.getAttribute('href') === '#erp') {
                    const mainContent = document.getElementById('dashboardContent');
                    gsap.to(mainContent, {
                        opacity: 0,
                        y: -20,
                        duration: 0.3,
                        ease: 'power2.in',
                        onComplete: () => {
                            // Clear existing content
                            mainContent.innerHTML = '<div id="erp-root"></div>';
                            // Render ERP dashboard
                            const root = ReactDOM.createRoot(document.getElementById('erp-root'));
                            root.render(React.createElement(window.ERPDashboard));
                            // Fade in animation
                            gsap.to(mainContent, {
                                opacity: 1,
                                y: 0,
                                duration: 0.3,
                                ease: 'power2.out'
                            });
                        }
                    });
                }
            });
        });
        document.addEventListener('DOMContentLoaded', () => {
            // Authentication check
            const isAuthenticated = sessionStorage.getItem('isAuthenticated');
            if (!isAuthenticated) {
                window.location.href = 'index.html';
                return;
            }

            const userType = sessionStorage.getItem('userType');
            const userData = JSON.parse(sessionStorage.getItem('userData') || '{}');
            const studentMenu = document.getElementById('studentMenu');
            const teacherMenu = document.getElementById('teacherMenu');
            const welcomeMessage = document.getElementById('welcomeMessage');
            const userRole = document.getElementById('userRole');

            // Update header with logout button
            const headerControls = document.querySelector('header .flex div:last-child');
            const logoutButton = document.createElement('button');
            logoutButton.className = 'text-gray-600 hover:text-gray-800';
            logoutButton.innerHTML = '<i class="fas fa-sign-out-alt text-xl"></i>';
            logoutButton.title = 'Logout';
            headerControls.appendChild(logoutButton);

            // Logout functionality
            logoutButton.addEventListener('click', () => {
                gsap.to('.main-content', {
                    opacity: 0,
                    y: -20,
                    duration: 0.3,
                    ease: 'power2.in',
                    onComplete: () => {
                        sessionStorage.clear();
                        window.location.href = 'index.html';
                    }
                });
            });

            // Update view based on user type
            function updateView() {
                if (userType === 'teacher') {
                    studentMenu.classList.remove('menu-active');
                    studentMenu.classList.add('hidden');
                    teacherMenu.classList.add('menu-active');
                    teacherMenu.classList.remove('hidden');
                    welcomeMessage.textContent = `Welcome, ${userData.name}`;
                    userRole.textContent = 'Faculty Member';

                    // Update stats for teacher
                    updateDashboardStats({
                        assignments: 45,
                        performance: '87%',
                        resources: 120
                    });
                } else {
                    teacherMenu.classList.remove('menu-active');
                    teacherMenu.classList.add('hidden');
                    studentMenu.classList.add('menu-active');
                    studentMenu.classList.remove('hidden');
                    welcomeMessage.textContent = `Welcome, ${userData.name}`;
                    userRole.textContent = 'Student';

                    // Update stats for student
                    updateDashboardStats({
                        assignments: 12,
                        attendance: '92%',
                        resources: 45
                    });
                }
            }

            // Function to update dashboard statistics
            function updateDashboardStats(stats) {
                const statsCards = document.querySelectorAll('#dashboardContent > div');

                if (userType === 'teacher') {
                    // Update card titles and values for teacher
                    statsCards[0].querySelector('h3').textContent = 'Total Assignments';
                    statsCards[0].querySelector('.text-3xl').textContent = stats.assignments;
                    statsCards[0].querySelector('.text-sm').textContent = 'Created assignments';

                    statsCards[1].querySelector('h3').textContent = 'Class Performance';
                    statsCards[1].querySelector('.text-3xl').textContent = stats.performance;
                    statsCards[1].querySelector('.text-sm').textContent = 'Average class performance';

                    statsCards[2].querySelector('h3').textContent = 'Resources';
                    statsCards[2].querySelector('.text-3xl').textContent = stats.resources;
                    statsCards[2].querySelector('.text-sm').textContent = 'Uploaded materials';
                } else {
                    // Update card titles and values for student
                    statsCards[0].querySelector('h3').textContent = 'Assignments';
                    statsCards[0].querySelector('.text-3xl').textContent = stats.assignments;
                    statsCards[0].querySelector('.text-sm').textContent = 'Active assignments';

                    statsCards[1].querySelector('h3').textContent = 'Attendance';
                    statsCards[1].querySelector('.text-3xl').textContent = stats.attendance;
                    statsCards[1].querySelector('.text-sm').textContent = 'This semester';

                    statsCards[2].querySelector('h3').textContent = 'Resources';
                    statsCards[2].querySelector('.text-3xl').textContent = stats.resources;
                    statsCards[2].querySelector('.text-sm').textContent = 'Available materials';
                }
            }

            // Initialize the view
            updateView();

            // Initial animations
            gsap.from('#dashboardContent > div', {
                duration: 0.8,
                opacity: 0,
                y: 30,
                stagger: 0.2,
                ease: 'power3.out'
            });

            // Sidebar hover effect
            const sidebar = document.getElementById('sidebar');
            sidebar.addEventListener('mouseenter', () => {
                const spans = sidebar.querySelectorAll('.menu-item span');
                gsap.to(spans, {
                    opacity: 1,
                    duration: 0.3,
                    stagger: 0.05,
                    ease: 'power2.out'
                });
            });

            sidebar.addEventListener('mouseleave', () => {
                const spans = sidebar.querySelectorAll('.menu-item span');
                gsap.to(spans, {
                    opacity: 0,
                    duration: 0.3,
                    stagger: 0.05,
                    ease: 'power2.in'
                });
            });

            // Handle menu item clicks
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Add click animation
                    gsap.to(this, {
                        duration: 0.2,
                        scale: 0.95,
                        yoyo: true,
                        repeat: 1
                    });
                });
            });

            // Notification button effect
            const notificationBtn = document.querySelector('button i.fa-bell').parentElement;
            notificationBtn.addEventListener('click', () => {
                gsap.to(notificationBtn, {
                    rotation: 45,
                    duration: 0.3,
                    yoyo: true,
                    repeat: 1
                });
            });

            // Profile button effect
            const profileBtn = document.querySelector('button i.fa-user-circle').parentElement;
            profileBtn.addEventListener('click', () => {
                gsap.to(profileBtn, {
                    scale: 0.9,
                    duration: 0.2,
                    yoyo: true,
                    repeat: 1
                });
            });
        });

    </script>
</body>

</html>